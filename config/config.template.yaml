db:
  host: "localhost"
  port: 3306
  username: "oj"
  password: "123456"
  dbName: "online_judge"
  tablePrefix: ""
  # 连接池配置
  maxOpenConns: 100      # 最大打开连接数
  maxIdleConns: 10       # 最大空闲连接数
  connMaxLifetime: 60    # 连接最大生存时间（分钟）
  connMaxIdleTime: 10    # 连接最大空闲时间（分钟）

log:
  development: true
  type: 1 # 0-控制台, 1-文件, 2-控制台+文件
  logFilePath: "./log/gateway.log"
  autoCreateFile: true

gin:
  allowOrigins:
    - "http://localhost:5173"
  allowMethods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowHeaders:
    - "Content-Type"
    - "Authorization"
    - "X-JWT-Token"
    - "X-Refresh-Token"
    - "X-Competition-JWT-Token"
    - "X-Competition-Refresh-Token"
    - "X-Description-Hash"
  exposeHeaders:
    - "X-JWT-Token"
    - "X-Refresh-Token"
    - "X-Competition-JWT-Token"
    - "X-Competition-Refresh-Token"
  allowCredentials: false
  maxAge: 3600 # 单位: 秒
  loginCheckPassPairs:
    - path: "/auth/login"
      method: "POST"
    - path: "/health"
      method: "GET"
    - path: "/metrics"
      method: "GET"
  adminCheckPairs:
    - path: "/api"
      method: "ANY"
      cmd:
        - "CreateProblem" # 创建题目
        - "UpdateProblem" # 更新题目
        - "GetProblemList" # 获取题目列表
        - "UploadProblemTestcase" # 上传题目测试用例
        - "GetProblem" # 获取题目详情

        - "CreateCompetition" # 创建比赛
        - "UpdateCompetition" # 更新比赛
        - "AddCompetitionProblem" # 添加比赛题目
        - "RemoveCompetitionProblem" # 删除比赛题目
        - "EnableCompetitionProblem" # 启用比赛题目
        - "DisableCompetitionProblem" # 禁用比赛题目
        - "ExportCompetitionData" # 导出比赛数据
        - "GetCompetitionList" # 获取比赛列表
        - "GetCompetitionProblemList" # 获取比赛题目列表
        - "GetCompetition" # 获取比赛详情

        - "GetUserList" # 获取用户列表
        - "AddUsersToCompetition" # 将用户添加到比赛名单
        - "EnableUsersInCompetition" # 允许比赛名单中的用户参赛
        - "DisableUsersInCompetition" # 禁止比赛名单中的用户参赛
        - "DeleteUser" # 删除用户
        - "UpdateUser" # 更新用户
        - "CreateUser" # 创建用户
        - "ResetUserPassword" # 重置用户密码
        - "UpdateUserPassword" # 更新用户密码
        - "GetCompetitionUserList" # 获取比赛用户列表

        - "InitRanking" # 初始化比赛排名
  addr: ":8080"

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0

jwt:
  jwtExpiration: 4320 # 3 天, 单位: 分钟
  jwtKey: "a7f3e9d2c8b4f1a6e5d8c3b7f2a9e6d1c4b8f5a2e7d3c9b6f1a4e8d2c5b9f3a6" # 64 位随机字符串

proxy:
  services:
    - "online-judge-controller:8081"

lru:
  size: 200

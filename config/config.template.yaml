db:
  host: "localhost"
  port: 3306
  username: "oj"
  password: "123456"
  dbName: "online_judge"
  tablePrefix: ""
  # 连接池配置
  maxOpenConns: 100      # 最大打开连接数
  maxIdleConns: 10       # 最大空闲连接数
  connMaxLifetime: 60    # 连接最大生存时间（分钟）
  connMaxIdleTime: 10    # 连接最大空闲时间（分钟）

log:
  development: true
  type: 1 # 0-控制台, 1-文件, 2-控制台+文件
  logFilePath: "./log/gateway.log"
  autoCreateFile: true

gin:
  allowOrigins:
    - "*"
  allowMethods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
  allowHeaders:
    - "Content-Type"
    - "Authorization"
    - "X-JWT-Token"
    - "X-Refresh-Token"
    - "X-Competition-JWT-Token"
    - "X-Competition-Refresh-Token"
  exposeHeaders:
    - "X-JWT-Token"
    - "X-Refresh-Token"
    - "X-Competition-JWT-Token"
    - "X-Competition-Refresh-Token"
  allowCredentials: false
  maxAge: 3600 # 单位: 秒
  loginCheckPassPairs:
    - path: "/auth/login"
      method: "POST"
    - path: "/health"
      method: "GET"
  adminCheckPairs:
    - path: "/api"
      method: "ANY"
      cmd:
        - "CreateProblem" # 创建题目
        - "UpdateProblem" # 更新题目
        - "GetProblemUploadPresignedURL" # 获取题目上传预签名URL
        - "GetProblemTestcaseUploadPresignedURL" # 获取题目测试用例上传预签名URL
        - "GetProblemTestcaseDownloadPresignedURL" # 获取题目测试用例下载预签名URL
        - "CreateCompetition" # 创建比赛
        - "UpdateCompetition" # 更新比赛
        - "AddCompetitionProblem" # 添加比赛题目
        - "RemoveCompetitionProblem" # 删除比赛题目
        - "EnableCompetitionProblem" # 启用比赛题目
        - "DisableCompetitionProblem" # 禁用比赛题目
        - "ExportCompetitionData" # 导出比赛数据
  addr: ":8080"

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 0

jwt:
  jwtExpiration: 4320 # 3 天, 单位: 分钟
  refreshExpiration: 10080 # 7 天, 单位: 分钟
  jwtKey: "a7f3e9d2c8b4f1a6e5d8c3b7f2a9e6d1c4b8f5a2e7d3c9b6f1a4e8d2c5b9f3a6" # 64 位随机字符串
  refreshKey: "e1d4c7b2f8a5e9d3c6b1f4a7e2d5c8b3f6a9e4d7c1b5f2a8e6d9c3b7f1a4e8d2" # 64 位随机字符串

proxy:
  services:
    - prefix: "/services/online_judge_controller"
      loadBalancer: "weighted_round_robin"

lru:
  size: 200

etcd:
  endpoints:
    - "localhost:2379"